<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Chandhu Fitness Admin</title>

<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>

:root{
 --primary:#ff3b3b;
 --bg:#000;
 --panel:#121212;
 --border:#222;
 --text:#eee;
}

*{margin:0;padding:0;box-sizing:border-box}

body{
 background:var(--bg);
 color:white;
 font-family:'Montserrat',sans-serif;
 -webkit-overflow-scrolling:touch;
}

.main{
 animation:fadeIn .4s ease;
}

@keyframes fadeIn{
 from{opacity:0;transform:translateY(10px)}
 to{opacity:1;transform:translateY(0)}
}

/* HEADER */

.header{
 position:sticky;
 top:0;
 backdrop-filter:blur(12px);
 background:rgba(10,10,10,0.85);
 padding:15px;
 z-index:100;
}

.search-bar{
 width:100%;
 padding:14px;
 border-radius:10px;
 border:1px solid #333;
 background:#111;
 color:white;
}

/* STATS */

.stats{
 display:flex;
 overflow-x:auto;
 gap:10px;
 padding:15px;
}

.stat-card{
 background:#151515;
 padding:15px;
 border-radius:14px;
 min-width:140px;
}

.stat-val{
 font-family:'Oswald';
 font-size:1.4rem;
}

/* TABLE */

.content-wrapper{
 padding:15px;
}

table,thead,tbody,th,td,tr{
 display:block;
}

thead{display:none}

tr{

 background:linear-gradient(145deg,#141414,#101010);

 margin-bottom:16px;
 border-radius:18px;
 padding:18px;

 border:1px solid rgba(255,255,255,0.05);

 box-shadow:0 4px 15px rgba(0,0,0,.5);

 transition:.2s;

 position:relative;

}

tr:active{
 transform:scale(.97);
 box-shadow:none;
}

td{
 display:flex;
 justify-content:space-between;
 padding:3px 0;
}

td:nth-child(2){
 font-size:1.2rem;
 font-weight:700;
}

td:nth-child(6){
 position:absolute;
 right:15px;
 top:15px;
}

td:nth-child(6) a{

 width:50px;
 height:50px;

 background:linear-gradient(135deg,#25d366,#128c7e);

 border-radius:50%;

 display:flex;
 align-items:center;
 justify-content:center;

 color:white !important;

 box-shadow:0 5px 15px rgba(0,0,0,.5);

}

.badge{
 padding:5px 10px;
 border-radius:6px;
 font-size:.7rem;
}

.b-active{background:#002a1a;color:#00ff88}
.b-soon{background:#332400;color:#ffb700}
.b-expired{background:#2a0000;color:#ff3b3b}

</style>
</head>

<body>

<div class="main">

<header class="header">
<input id="search" class="search-bar" placeholder="ðŸ” Search..." onkeyup="App.search()">
</header>

<div class="stats">

<div class="stat-card">
<div class="stat-val">â‚¹<span id="stat-revenue">0</span></div>
Revenue
</div>

<div class="stat-card">
<div class="stat-val" id="stat-total">0</div>
Members
</div>

<div class="stat-card">
<div class="stat-val" id="stat-soon">0</div>
Expiring Soon
</div>

</div>

<div class="content-wrapper">

<div id="loader">Loading...</div>

<table id="data-table" style="display:none">
<tbody id="table-body"></tbody>
</table>

</div>

</div>

<script>

const API_URL="YOUR_SCRIPT_URL";

let DB=[];

const App={

fetchData(){

fetch(API_URL)
.then(r=>r.json())
.then(data=>{

const rows=data.data.slice(1);

DB=rows.map(r=>({

date:r[0],
name:r[1],
phone:r[2],
plan:r[3],
amount:parseInt(r[4])||0,
days:parseInt(r[7])||0

}));

DB.sort((a,b)=>new Date(b.date)-new Date(a.date));

this.updateStats();
this.render(DB);

loader.style.display="none";
data-table.style.display="block";

});

},

updateStats(){

stat-revenue.innerText=DB.reduce((s,i)=>s+i.amount,0).toLocaleString();
stat-total.innerText=DB.length;
stat-soon.innerText=DB.filter(i=>i.days>=0 && i.days<=7).length;

},

search(){

const term=search.value.toLowerCase();

this.render(DB.filter(i=>
i.name.toLowerCase().includes(term) ||
(i.phone && i.phone.includes(term))
));

},

render(list){

table-body.innerHTML=list.map(item=>{

let badge="b-active";
let status=`${item.days} Days Left`;

if(item.days<0){badge="b-expired";status="Expired"}
else if(item.days<=7){badge="b-soon"}

let msg=`Hello ${item.name}, your gym membership status: ${status}.`;

return`

<tr>

<td>${new Date(item.date).toLocaleDateString()}</td>

<td>${item.name}</td>

<td>${item.phone||"-"}</td>

<td>${item.plan}</td>

<td><span class="badge ${badge}">${status}</span></td>

<td>${item.phone?`<a href="https://wa.me/91${item.phone}?text=${encodeURIComponent(msg)}" target="_blank"><i class="fab fa-whatsapp"></i></a>`:""}</td>

</tr>

`;

}).join("");

}

};

App.fetchData();

</script>

</body>
</html>
